spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      httpclient:
        connect-timeout: 1000
        response-timeout: 10s
  security:
    oauth2:
      resourceserver:
        jwt:
          secret-key: ${app.jwt.secret}
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
  redis:
    timeout: 2000ms

server:
  port: 8080
  forward-headers-strategy: framework

app:
  jwt:
    secret: ${JWT_SECRET:defaultSecretKeyForJWTTokenGenerationInGreenBondPlatform}
    expiration: ${JWT_EXPIRATION:3600}
  auth:
    max-failed-attempts: ${MAX_FAILED_LOGIN_ATTEMPTS:5}
    lockout-duration-minutes: ${ACCOUNT_LOCKOUT_DURATION:30}
  gateway:
    # Set to true to use direct URLs instead of Eureka service discovery (for development)
    use-direct-urls: ${USE_DIRECT_URLS:true}
  services:
    bond-issuance:
      url: ${BOND_ISSUANCE_SERVICE_URL:http://localhost:8081}
    impact-monitoring:
      url: ${IMPACT_MONITORING_SERVICE_URL:http://localhost:8084}
    document-verification:
      url: ${DOCUMENT_VERIFICATION_SERVICE_URL:http://localhost:8083}

logging:
  level:
    com.esgbank.greenbond.gateway: DEBUG
    org.springframework.cloud.gateway: INFO
    org.springframework.security: INFO
  pattern:
    level: "%5p [%X{requestId}, %X{username}, %X{clientIp}]"

management:
  endpoints:
    web:
      exposure:
        include: health, info, metrics
  endpoint:
    health:
      show-details: always
    metrics:
      enabled: true

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    config-url: /v3/api-docs/swagger-config
    urls:
      - url: /v3/api-docs/issuance
        name: Bond Issuance Service
      - url: /v3/api-docs/monitoring
        name: Impact Monitoring Service
      - url: /v3/api-docs/verification
        name: Document Verification Service